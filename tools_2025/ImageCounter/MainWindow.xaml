<Window x:Class="ImageCounter.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="图片计数器" MinHeight="350" MinWidth="350" Height="350" Width="350" Icon="/Revit.ico">
    <Grid Margin="10">
        <StackPanel>
            <StackPanel>
                <!-- CSV设置区域 -->
                <GroupBox Header="CSV记录设置">
                    <StackPanel>
                        <StackPanel Orientation="Horizontal">
                            <CheckBox Margin="2" Content="记录CSV文件" IsChecked="{Binding RecordInfo}" ToolTip="记录黑色图片信息到本地csv表格文件"/>
                            <CheckBox Margin="2" Content="自动删除" IsChecked="{Binding DelImg}" ToolTip="删除黑色图片"/>
                            <!--<CheckBox Margin="2" Content="多进程" IsChecked="{Binding Multiprocessing}" ToolTip=""/>-->
                        </StackPanel>
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="Auto"/>
                            </Grid.ColumnDefinitions>
                            <TextBox Grid.Column="0" Grid.Row="0"  Margin="2" MinWidth="220" Text="{Binding ScanFolderPath}" />
                            <Button  Grid.Column="1"  Grid.Row="0" Margin="2" Content="源文件夹" Width="60"  Click="BrowseButton_Click" />
                            <TextBox Grid.Column="0" Grid.Row="1" Margin="2" Text="{Binding CsvSavePath}"  MinWidth="100"  IsEnabled="{Binding RecordInfo}" HorizontalAlignment="Stretch"/>
                            <Button Grid.Column="1"  Grid.Row="1" Margin="2" Content="备份文件夹" Width="60"  MinWidth="60" IsEnabled="{Binding RecordInfo}" Click="SelCsvPath"/>
                        </Grid>
                    </StackPanel>
                </GroupBox>
                <!-- 其他界面元素 -->
            </StackPanel>
            <StackPanel Margin="5" Orientation="Horizontal" VerticalAlignment="Center">
                <Button Margin="2" x:Name="CheckBlackImgs" Content="检查黑图"   Click="CheckBlackImgs_Click" />
                <Button Margin="2" x:Name="CheckRepetImgs" Content="检查重图"   Click="CheckRepetImgs_Click" />
                <Button Margin="2" x:Name="CancelBtn"  Content="停止" Click="CancelBtn_Click"  IsEnabled="False"/>
            </StackPanel>
            <!-- 阈值调节区域 -->
            <Border Background="#F0F0F0" Padding="10" CornerRadius="5" Margin="5">
                <StackPanel>
                    <TextBlock Text="黑色像素占比阈值设置" FontWeight="Bold"/>
                    <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                        <TextBlock VerticalAlignment="Center" Text="阈值:" />
                        <Slider x:Name="ThresholdSlider"  Value="{Binding BlackThreshold, Mode=TwoWay}" VerticalAlignment="Center" Minimum="0" Maximum="100"  Width="120"  TickPlacement="BottomRight" IsSnapToTickEnabled="True" />
                        <TextBox Text="{Binding BlackThreshold}"  VerticalAlignment="Center" Width="40"/>
                        <TextBlock VerticalAlignment="Center" Text="%"/>
                    </StackPanel>
                </StackPanel>
            </Border>

            <StackPanel Orientation="Horizontal" Margin="5">
                <TextBlock Text="检查进度"/>
                <TextBlock Margin="5,0" Text="{Binding BlackPercentage,  StringFormat={}{0:F2}%}" Foreground="DarkOrange"/>
                <TextBlock >
                    <Run Text=" ("/>
                    <Run Text="{Binding BlackImageCount}"/>
                    <Run Text="/"/>
                    <Run Text="{Binding ImageCount}"/>
                    <Run Text=")"/>
                </TextBlock>
            </StackPanel>
            <StackPanel>
                <TextBlock x:Name="StatusText" Text="{Binding StatusMessage}"    TextWrapping="Wrap" Visibility="Collapsed"/>
                <ProgressBar Margin="2" x:Name="ProgressBar" Height="20"  IsIndeterminate="True" Visibility="Collapsed"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</Window>
    
    
    
